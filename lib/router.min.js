!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e(require("riot"));else if("function"==typeof define&&define.amd)define(["riot"],e);else{var r=e("object"==typeof exports?require("riot"):t.riot);for(var n in r)("object"==typeof exports?exports:t)[n]=r[n]}}(this,function(t){return function(t){function e(n){if(r[n])return r[n].exports;var o=r[n]={exports:{},id:n,loaded:!1};return t[n].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e,r){"use strict";function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=r(1),s=console&&console.error||function(){},u=function(){function t(){o(this,t),i.router=this,i.observable(this),this.handler=new h,this.current=new d(new m("")),this.handleRequest=this.handleRequest.bind(this)}return t.prototype.route=function(t){this.handler=t},t.prototype.process=function(t){var e=new d(t);return this.handler.process(t,e),this.current=e,this.trigger("route:updated",e),e},t.prototype.handleRequest=function(){var t=Array.prototype.slice.call(arguments);this.process(new m(t.join("/")))},t.prototype.start=function(){i.route(this.handleRequest),i.route.start(),i.route.exec(this.handleRequest)},t}(),a=function(){function t(){o(this,t)}return t.prototype.matches=function(t){return!1},t.prototype.process=function(t,e){var r=this.matches(t);return r?this.processMatch(t,e,r):this.processNotMatch(t,e)},t.prototype.processMatch=function(t,e,r){return e.add(r),!0},t.prototype.processNotMatch=function(t,e){return!1},t.prototype.processRoutes=function(t,e,r){if(r&&r.length){for(var n=r.length,o=0;n>o;o++){var i=r[o];if(i.process(t,e))return!0}return!1}},t}(),h=function(t){function e(r){o(this,e),t.call(this,r),r=r||{},this.tag=r.tag,this.path=r.path,this.name=r.name,this.pathParameterNames=[],this.pattern="^/?"+(this.path||this.name||this.tag||"").replace(/^\//,"").replace(/:([^\/]+)/,function(t,e){return this.pathParameterNames.push(e),"([^/]+)"}.bind(this))+"(:?/|$)",this.regex=new RegExp(this.pattern)}return n(e,t),e.prototype.routes=function(t){var e=t.filter(function(t){return t instanceof f}),r=t.filter(function(t){return t instanceof l}),n=t.filter(function(t){return t instanceof p}),o=t.filter(function(t){return-1===e.indexOf(t)&&-1===r.indexOf(t)&&-1===n.indexOf(t)});return n.length>1&&s("Can't use more than one NotFoundRoute per route. --> "+(this.name||this.path||this.tag)),r.length>1&&s("Can't use more than one DefaultRoute per route. --> "+(this.name||this.path||this.tag)),this._routes=[].concat(e).concat(o).concat(r).concat(n),this},e.prototype.matches=function(t){var e=this.regex.exec(t.uri);if(e){var r={};for(var n in this.pathParameterNames){var o=this.pathParameterNames[n];r[o]=e[parseInt(n,10)+1]}return{route:this,tag:this.tag,found:e[0],params:r}}return!1},e.prototype.processMatch=function(e,r,n){var o=t.prototype.processMatch.call(this,e,r,n);return this.processRoutes(e,r,n),o},e.prototype.processRoutes=function(e,r,n){return t.prototype.processRoutes.call(this,new c(e,n),r,this._routes)},e}(a),c=function v(t,e){o(this,v),this.request=t,this.matcher=e,this.uri=this.request.uri.substring(e.found.length),this.parentUri=this.request.uri.substring(0,e.found.length)},p=function(t){function e(r){o(this,e),t.call(this,r),r=r||{},this.tag=r.tag}return n(e,t),e.prototype.matches=function(t){return{route:this,tag:this.tag,found:t.uri}},e}(a),f=function(t){function e(r){o(this,e),t.call(this,r),r=r||{},this.from=r.from,this.to=r.to,this.pattern="(^/?)"+this.from+"(/|$)",this.regex=new RegExp(this.pattern)}return n(e,t),e.prototype.process=function(t,e){var r=t.uri.replace(this.regex,"$1"+this.to+"$2");if(r!==t.uri){var n=t.parentUri||"";e.uri=n+r,t.uri=r}},e}(a),l=function(t){function e(r){o(this,e),t.call(this,r),r=r||{},this.tag=r.tag}return n(e,t),e.prototype.matches=function(t){var e=t.uri.trim();return"/"===e||""===e?{route:this,tag:this.tag,found:e}:void 0},e}(a),m=function y(t){o(this,y),this.uri=t},d=function(){function t(e){o(this,t),this.uri=e.uri,this.matches=[],this.params={}}return t.prototype.add=function(t){this.matches.push(t);var e=t.params;if(e)for(var r in e)e.hasOwnProperty(r)&&(this.params[r]=e[r])},t.prototype.get=function(t){return this.matches[t]},t.prototype.size=function(){return this.matches.length},t.prototype.isEmpty=function(){return this.matches.length},t}();i.tag("route-empty","",function(t){}),i.tag("route",'<route-content name="content"></route-content>',function(t){this.calculateLevel=function(t){var e=0;return t.parent&&(e+=this.calculateLevel(t.parent)),t.opts.__router_level&&(e+=t.opts.__router_level),t.__router_tag&&(e+=1),e}.bind(this),this.mountTag=function(t,e){this.instance&&this.instance.forEach(function(t){t.unmount(!0)}),t&&(this.instance=i.mount(this.root.children[0],t,e))},this.updateRoute=function(){var t={tag:"route-empty"};if(i.router&&i.router.current){var e=i.router.current;if(this.level<=e.size()){var r=e.get(this.level);if(r){var n=JSON.parse(JSON.stringify(r.params||{}));n.__router_level=this.level,t={tag:r.tag,api:n}}}}this.mountTag(t.tag,t.api)}.bind(this),this.__router_tag="route",this.level=this.calculateLevel(this),i.router.on("route:updated",this.updateRoute),this.on("unmount",function(){i.router.off("route:updated",this.updateRoute)}.bind(this))});var g=new u;g.Route=h,g.DefaultRoute=l,g.RedirectRoute=f,g.NotFoundRoute=p,g._={Response:d,Request:m},i.router=g,t.exports=g},function(e,r,n){e.exports=t}])});
//# sourceMappingURL=router.min.js.map