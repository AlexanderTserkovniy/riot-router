{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///router.min.js","webpack:///webpack/bootstrap c500cd8a6c4c0fa98afa","webpack:///./router.js","webpack:///external \"riot\""],"names":["root","factory","exports","module","require","define","amd","a","i","this","__WEBPACK_EXTERNAL_MODULE_1__","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","_inherits","subClass","superClass","TypeError","prototype","Object","create","constructor","value","enumerable","writable","configurable","__proto__","_classCallCheck","instance","Constructor","riot","error","console","Router","router","observable","handler","Route","current","Response","Request","handleRequest","bind","route","process","request","response","trigger","params","Array","slice","arguments","join","start","exec","Handler","matches","matcher","processMatch","processNotMatch","add","processRoutes","routes","length","t","_Handler","options","tag","path","name","pathParameterNames","pattern","replace","ignored","group","push","regex","RegExp","_routes","redirectRoutes","filter","r","RedirectRoute","defaultRoutes","DefaultRoute","notFoundRoutes","NotFoundRoute","otherRoutes","indexOf","concat","uri","parseInt","found","RouteChildRequest","substring","parentUri","_Handler2","_Handler3","from","to","parent","_Handler4","trim","key","hasOwnProperty","get","index","size","isEmpty","opts","calculateLevel","target","level","__router_level","__router_tag","unmountTag","forEach","unmount","mountTag","api","mount","children","updateRoute","JSON","parse","stringify","on","off","_"],"mappings":"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","file":"router.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"riot\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"riot\"], factory);\n\telse {\n\t\tvar a = typeof exports === 'object' ? factory(require(\"riot\")) : factory(root[\"riot\"]);\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(this, function(__WEBPACK_EXTERNAL_MODULE_1__) {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"riot\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"riot\"], factory);\n\telse {\n\t\tvar a = typeof exports === 'object' ? factory(require(\"riot\")) : factory(root[\"riot\"]);\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(this, function(__WEBPACK_EXTERNAL_MODULE_1__) {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tvar riot = __webpack_require__(1);\n\tvar error = console && console.error || function () {};\n\t\n\tvar Router = (function () {\n\t  function Router() {\n\t    _classCallCheck(this, Router);\n\t\n\t    riot.router = this;\n\t    riot.observable(this);\n\t    this.handler = new Route();\n\t    this.current = new Response(new Request(''));\n\t    this.handleRequest = this.handleRequest.bind(this);\n\t  }\n\t\n\t  Router.prototype.route = function route(handler) {\n\t    this.handler = handler;\n\t  };\n\t\n\t  Router.prototype.process = function process(request) {\n\t    var response = new Response(request);\n\t    this.handler.process(request, response);\n\t    this.current = response;\n\t    this.trigger('route:updated', response);\n\t    return response;\n\t  };\n\t\n\t  Router.prototype.handleRequest = function handleRequest() {\n\t    var params = Array.prototype.slice.call(arguments);\n\t    this.process(new Request(params.join('/')));\n\t  };\n\t\n\t  Router.prototype.start = function start() {\n\t    riot.route(this.handleRequest);\n\t    riot.route.start();\n\t    riot.route.exec(this.handleRequest);\n\t  };\n\t\n\t  return Router;\n\t})();\n\t\n\tvar Handler = (function () {\n\t  function Handler() {\n\t    _classCallCheck(this, Handler);\n\t  }\n\t\n\t  Handler.prototype.matches = function matches(request) {\n\t    return false;\n\t  };\n\t\n\t  Handler.prototype.process = function process(request, response) {\n\t    var matcher = this.matches(request);\n\t    if (!matcher) return this.processNotMatch(request, response);\n\t    return this.processMatch(request, response, matcher);\n\t  };\n\t\n\t  Handler.prototype.processMatch = function processMatch(request, response, matcher) {\n\t    response.add(matcher);\n\t    return true;\n\t  };\n\t\n\t  Handler.prototype.processNotMatch = function processNotMatch(request, response) {\n\t    return false;\n\t  };\n\t\n\t  Handler.prototype.processRoutes = function processRoutes(request, response, routes) {\n\t    if (routes && routes.length) {\n\t      var t = routes.length;\n\t      for (var i = 0; i < t; i++) {\n\t        var route = routes[i];\n\t        if (route.process(request, response)) return true;\n\t      }\n\t      return false;\n\t    }\n\t  };\n\t\n\t  return Handler;\n\t})();\n\t\n\tvar Route = (function (_Handler) {\n\t  function Route(options) {\n\t    _classCallCheck(this, Route);\n\t\n\t    _Handler.call(this, options);\n\t    options = options || {};\n\t    this.tag = options.tag;\n\t    this.path = options.path;\n\t    this.name = options.name;\n\t    this.pathParameterNames = [];\n\t    this.pattern = '^/?' + (this.path || this.name || this.tag || '').replace(/^\\//, '').replace(/:([^/]+)/, (function (ignored, group) {\n\t      this.pathParameterNames.push(group);\n\t      return '([^/]+)';\n\t    }).bind(this)) + '(:?/|$)';\n\t    this.regex = new RegExp(this.pattern);\n\t  }\n\t\n\t  _inherits(Route, _Handler);\n\t\n\t  Route.prototype.routes = function routes(_routes) {\n\t    var redirectRoutes = _routes.filter(function (r) {\n\t      return r instanceof RedirectRoute;\n\t    });\n\t    var defaultRoutes = _routes.filter(function (r) {\n\t      return r instanceof DefaultRoute;\n\t    });\n\t    var notFoundRoutes = _routes.filter(function (r) {\n\t      return r instanceof NotFoundRoute;\n\t    });\n\t    var otherRoutes = _routes.filter(function (r) {\n\t      return redirectRoutes.indexOf(r) === -1 && defaultRoutes.indexOf(r) === -1 && notFoundRoutes.indexOf(r) === -1;\n\t    });\n\t    if (notFoundRoutes.length > 1) error('Can\\'t use more than one NotFoundRoute per route. --> ' + (this.name || this.path || this.tag));\n\t    if (defaultRoutes.length > 1) error('Can\\'t use more than one DefaultRoute per route. --> ' + (this.name || this.path || this.tag));\n\t    this._routes = [].concat(redirectRoutes).concat(otherRoutes).concat(defaultRoutes).concat(notFoundRoutes);\n\t    return this;\n\t  };\n\t\n\t  Route.prototype.matches = function matches(request) {\n\t    var matcher = this.regex.exec(request.uri);\n\t    if (matcher) {\n\t      var params = {};\n\t      for (var i in this.pathParameterNames) {\n\t        var name = this.pathParameterNames[i];\n\t        params[name] = matcher[parseInt(i, 10) + 1];\n\t      }\n\t      return { route: this, tag: this.tag, found: matcher[0], params: params };\n\t    }\n\t    return false;\n\t  };\n\t\n\t  Route.prototype.processMatch = function processMatch(request, response, matcher) {\n\t    var matches = _Handler.prototype.processMatch.call(this, request, response, matcher);\n\t    this.processRoutes(request, response, matcher);\n\t    return matches;\n\t  };\n\t\n\t  Route.prototype.processRoutes = function processRoutes(request, response, matcher) {\n\t    return _Handler.prototype.processRoutes.call(this, new RouteChildRequest(request, matcher), response, this._routes);\n\t  };\n\t\n\t  return Route;\n\t})(Handler);\n\t\n\tvar RouteChildRequest = function RouteChildRequest(request, matcher) {\n\t  _classCallCheck(this, RouteChildRequest);\n\t\n\t  this.request = request;\n\t  this.matcher = matcher;\n\t  this.uri = this.request.uri.substring(matcher.found.length);\n\t  this.parentUri = this.request.uri.substring(0, matcher.found.length);\n\t};\n\t\n\tvar NotFoundRoute = (function (_Handler2) {\n\t  function NotFoundRoute(options) {\n\t    _classCallCheck(this, NotFoundRoute);\n\t\n\t    _Handler2.call(this, options);\n\t    options = options || {};\n\t    this.tag = options.tag;\n\t  }\n\t\n\t  _inherits(NotFoundRoute, _Handler2);\n\t\n\t  NotFoundRoute.prototype.matches = function matches(request) {\n\t    return { route: this, tag: this.tag, found: request.uri };\n\t  };\n\t\n\t  return NotFoundRoute;\n\t})(Handler);\n\t\n\tvar RedirectRoute = (function (_Handler3) {\n\t  function RedirectRoute(options) {\n\t    _classCallCheck(this, RedirectRoute);\n\t\n\t    _Handler3.call(this, options);\n\t    options = options || {};\n\t    this.from = options.from;\n\t    this.to = options.to;\n\t    this.pattern = '(^/?)' + this.from + '(/|$)';\n\t    this.regex = new RegExp(this.pattern);\n\t  }\n\t\n\t  _inherits(RedirectRoute, _Handler3);\n\t\n\t  RedirectRoute.prototype.process = function process(request, response) {\n\t    var uri = request.uri.replace(this.regex, '$1' + this.to + '$2');\n\t    if (uri !== request.uri) {\n\t      var parent = request.parentUri || '';\n\t      // Rewrite response.uri & request.uri\n\t      response.uri = parent + uri;\n\t      request.uri = uri;\n\t    }\n\t  };\n\t\n\t  return RedirectRoute;\n\t})(Handler);\n\t\n\tvar DefaultRoute = (function (_Handler4) {\n\t  function DefaultRoute(options) {\n\t    _classCallCheck(this, DefaultRoute);\n\t\n\t    _Handler4.call(this, options);\n\t    options = options || {};\n\t    this.tag = options.tag;\n\t  }\n\t\n\t  _inherits(DefaultRoute, _Handler4);\n\t\n\t  DefaultRoute.prototype.matches = function matches(request) {\n\t    var uri = request.uri.trim();\n\t    if (uri === '/' || uri === '') return { route: this, tag: this.tag, found: uri };\n\t  };\n\t\n\t  return DefaultRoute;\n\t})(Handler);\n\t\n\tvar Request = function Request(uri) {\n\t  _classCallCheck(this, Request);\n\t\n\t  this.uri = uri;\n\t};\n\t\n\tvar Response = (function () {\n\t  function Response(request) {\n\t    _classCallCheck(this, Response);\n\t\n\t    this.uri = request.uri;\n\t    this.matches = [];\n\t    this.params = {};\n\t  }\n\t\n\t  Response.prototype.add = function add(matcher) {\n\t    this.matches.push(matcher);\n\t    var params = matcher.params;\n\t    if (params) {\n\t      for (var key in params) {\n\t        if (params.hasOwnProperty(key)) {\n\t          this.params[key] = params[key];\n\t        }\n\t      }\n\t    }\n\t  };\n\t\n\t  Response.prototype.get = function get(index) {\n\t    return this.matches[index];\n\t  };\n\t\n\t  Response.prototype.size = function size() {\n\t    return this.matches.length;\n\t  };\n\t\n\t  Response.prototype.isEmpty = function isEmpty() {\n\t    return this.matches.length;\n\t  };\n\t\n\t  return Response;\n\t})();\n\t\n\triot.tag('route-empty', '', function (opts) {});\n\t\n\triot.tag('route', '<route-content name=\"content\"></route-content>', function (opts) {\n\t  this.calculateLevel = (function (target) {\n\t    var level = 0;\n\t    if (target.parent) level += this.calculateLevel(target.parent);\n\t    if (target.opts.__router_level) level += target.opts.__router_level;\n\t    if (target.__router_tag) level += 1;\n\t    return level;\n\t  }).bind(this);\n\t\n\t  this.unmountTag = function () {\n\t    if (this.instance) this.instance.forEach(function (instance) {\n\t      instance.unmount(true);\n\t    });\n\t  };\n\t\n\t  this.mountTag = function (tag, api) {\n\t    this.unmountTag();\n\t    if (tag) this.instance = riot.mount(this.root.children[0], tag, api);\n\t  };\n\t\n\t  this.updateRoute = (function () {\n\t    var mount = { tag: 'route-empty' };\n\t    if (riot.router && riot.router.current) {\n\t      var response = riot.router.current;\n\t      if (this.level <= response.size()) {\n\t        var matcher = response.get(this.level);\n\t        if (matcher) {\n\t          var api = JSON.parse(JSON.stringify(matcher.params || {}));\n\t          api.__router_level = this.level;\n\t          mount = { tag: matcher.tag, api: api };\n\t        }\n\t      }\n\t    }\n\t    this.mountTag(mount.tag, mount.api);\n\t  }).bind(this);\n\t\n\t  this.__router_tag = 'route';\n\t  this.level = this.calculateLevel(this);\n\t  riot.router.on('route:updated', this.updateRoute);\n\t\n\t  this.on('unmount', (function () {\n\t    riot.router.off('route:updated', this.updateRoute);\n\t    this.unmountTag();\n\t  }).bind(this));\n\t});\n\t\n\tvar router = new Router();\n\trouter.Route = Route;\n\trouter.DefaultRoute = DefaultRoute;\n\trouter.RedirectRoute = RedirectRoute;\n\trouter.NotFoundRoute = NotFoundRoute;\n\trouter._ = { Response: Response, Request: Request };\n\t\n\triot.router = router;\n\t\n\tmodule.exports = router;\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_1__;\n\n/***/ }\n/******/ ])\n});\n;\n\n\n/** WEBPACK FOOTER **\n ** router.min.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap c500cd8a6c4c0fa98afa\n **/","var riot = require('riot');  \nvar error = console && console.error || function() {};\n\nclass Router {\n  constructor() {\n    riot.router = this;\n    riot.observable(this);\n    this.handler = new Route();\n    this.current = new Response(new Request(\"\"));\n    this.handleRequest = this.handleRequest.bind(this);\n  }\n\n  route(handler) {\n    this.handler = handler;\n  }\n\n  process(request) {\n    var response = new Response(request);\n    this.handler.process(request, response);\n    this.current = response;\n    this.trigger('route:updated', response);\n    return response;\n  }\n\n  handleRequest() {\n    var params = Array.prototype.slice.call(arguments);\n    this.process(new Request(params.join(\"/\")));\n  }\n\n  start() {\n    riot.route(this.handleRequest);\n    riot.route.start();\n    riot.route.exec(this.handleRequest);\n  }\n}\n\nclass Handler {\n  constructor() {\n  }\n\n  matches(request) {\n    return false;\n  }\n\n  process(request, response) {\n    var matcher = this.matches(request);\n    if (!matcher) return this.processNotMatch(request, response);\n    return this.processMatch(request, response, matcher);\n  }\n\n  processMatch(request, response, matcher) {\n    response.add(matcher);\n    return true;\n  }\n\n  processNotMatch(request, response) {\n    return false;\n  }\n\n  processRoutes(request, response, routes) {\n    if (routes && routes.length) {\n      var t = routes.length;\n      for(var i = 0; i < t; i++) {\n        var route = routes[i];\n        if (route.process(request, response))\n          return true;\n      }\n      return false;\n    }\n  }\n}\n\nclass Route extends Handler {\n  constructor(options) {\n    super(options);\n    options = options || {};\n    this.tag = options.tag;\n    this.path = options.path;\n    this.name = options.name;\n    this.pathParameterNames = [];\n    this.pattern = \"^/?\" + (this.path || this.name || this.tag || \"\").replace(/^\\//,\"\").replace(/:([^/]+)/, function(ignored, group) {\n      this.pathParameterNames.push(group);\n      return \"([^/]+)\";\n    }.bind(this)) + \"(:?/|$)\";\n    this.regex = new RegExp(this.pattern);\n  }\n\n  routes(routes) {\n    var redirectRoutes = routes.filter(function(r) { return r instanceof RedirectRoute; });\n    var defaultRoutes = routes.filter(function(r) { return r instanceof DefaultRoute; });\n    var notFoundRoutes = routes.filter(function(r) { return r instanceof NotFoundRoute; });\n    var otherRoutes = routes.filter(function(r) { return redirectRoutes.indexOf(r) === -1 \n                                                      &&  defaultRoutes.indexOf(r) === -1\n                                                      && notFoundRoutes.indexOf(r) === -1; });\n    if (notFoundRoutes.length > 1) error(\"Can't use more than one NotFoundRoute per route. --> \" + (this.name || this.path || this.tag));\n    if (defaultRoutes.length > 1) error(\"Can't use more than one DefaultRoute per route. --> \" + (this.name || this.path || this.tag));\n    this._routes = [].concat(redirectRoutes).concat(otherRoutes).concat(defaultRoutes).concat(notFoundRoutes);\n    return this;\n  }\n\n  matches(request) {\n    var matcher = this.regex.exec(request.uri);\n    if (matcher) {\n      var params = {};\n      for (var i in this.pathParameterNames) {\n        var name = this.pathParameterNames[i];\n        params[name] = matcher[parseInt(i, 10) + 1];\n      }\n      return {route: this, tag: this.tag, found: matcher[0], params: params};\n    }\n    return false;\n  }\n\n  processMatch(request, response, matcher) {\n    var matches = super.processMatch(request, response, matcher);\n    this.processRoutes(request, response, matcher);\n    return matches;\n  }\n\n  processRoutes(request, response, matcher) {\n    return super.processRoutes(new RouteChildRequest(request, matcher), response, this._routes);\n  }\n}\n\nclass RouteChildRequest {\n  constructor(request, matcher) {\n    this.request = request;\n    this.matcher = matcher;\n    this.uri = this.request.uri.substring(matcher.found.length);\n    this.parentUri = this.request.uri.substring(0, matcher.found.length);\n  }\n}\n\nclass NotFoundRoute extends Handler {\n  constructor(options) {\n    super(options);\n    options = options || {};\n    this.tag = options.tag;\n  }\n  matches(request) {\n    return {route: this, tag: this.tag, found: request.uri};\n  }\n}\n\nclass RedirectRoute extends Handler {\n  \n  constructor(options) {\n    super(options);\n    options = options || {};\n    this.from = options.from;\n    this.to = options.to;\n    this.pattern = \"(^/?)\" + this.from + \"(/|$)\";\n    this.regex = new RegExp(this.pattern);\n  }\n  \n  process(request, response) {\n    var uri = request.uri.replace(this.regex, \"$1\" + this.to + \"$2\");\n    if (uri !== request.uri) {\n      var parent = request.parentUri || \"\";\n      // Rewrite response.uri & request.uri\n      response.uri = parent + uri;\n      request.uri = uri;\n    }\n  }\n  \n}\n\nclass DefaultRoute extends Handler {\n  constructor(options) {\n    super(options);\n    options = options || {};\n    this.tag = options.tag;\n  }\n  matches(request) {\n    var uri = request.uri.trim();\n    if (uri === \"/\" || uri === \"\")\n      return {route: this, tag: this.tag, found: uri};\n  }\n}\n\nclass Request {\n  constructor(uri) {\n    this.uri = uri;\n  }\n}\n\nclass Response {\n  constructor(request) {\n    this.uri = request.uri;\n    this.matches = [];\n    this.params = {};\n  }\n  add(matcher) {\n    this.matches.push(matcher);\n    var params = matcher.params;\n    if (params) {\n      for (var key in params) {\n        if (params.hasOwnProperty(key)) {\n          this.params[key] = params[key];\n        }\n      }\n    }\n  }\n\n  get(index) {\n    return this.matches[index];\n  }\n\n  size() {\n    return this.matches.length;\n  }\n\n  isEmpty() {\n    return this.matches.length;\n  }\n}\n\nriot.tag('route-empty', '', function(opts) {\n});\n\nriot.tag('route', '<route-content name=\"content\"></route-content>', function(opts) {\n  this.calculateLevel = function(target) {\n    var level = 0;\n    if (target.parent) level += this.calculateLevel(target.parent);\n    if (target.opts.__router_level) level += target.opts.__router_level;\n    if (target.__router_tag) level += 1;\n    return level;\n  }.bind(this);\n\n  this.unmountTag = function() {\n    if (this.instance)\n      this.instance.forEach(function(instance) {\n        instance.unmount(true);\n      });    \n  }\n  \n  this.mountTag = function(tag, api) {\n    this.unmountTag();\n    if (tag)\n      this.instance = riot.mount(this.root.children[0], tag, api);\n  }\n\n  this.updateRoute = function() {\n    var mount = {tag: 'route-empty'};\n    if (riot.router && riot.router.current) {\n      var response = riot.router.current;\n      if (this.level <= response.size()) {\n        var matcher = response.get(this.level);\n        if (matcher) {\n          var api = JSON.parse( JSON.stringify( matcher.params || {} ) );\n          api.__router_level = this.level;\n          mount = {tag: matcher.tag, api: api};\n        }\n      }\n    }\n    this.mountTag(mount.tag, mount.api);\n  }.bind(this);\n\n  this.__router_tag = 'route';\n  this.level = this.calculateLevel(this);\n  riot.router.on('route:updated', this.updateRoute);\n\n  this.on('unmount', function() {\n    riot.router.off('route:updated', this.updateRoute);\n    this.unmountTag();\n  }.bind(this));\n\n});\n\nvar router = new Router();\nrouter.Route = Route;\nrouter.DefaultRoute = DefaultRoute;\nrouter.RedirectRoute = RedirectRoute;\nrouter.NotFoundRoute = NotFoundRoute;\nrouter._ = {Response: Response, Request: Request};\n\nriot.router = router;\n\nmodule.exports = router;\n\n\n\n/** WEBPACK FOOTER **\n ** ./router.js\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_1__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"riot\"\n ** module id = 1\n ** module chunks = 0\n **/"],"sourceRoot":""}