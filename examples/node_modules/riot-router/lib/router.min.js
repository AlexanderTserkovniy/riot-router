!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e(require("riot"));else if("function"==typeof define&&define.amd)define(["riot"],e);else{var r=e("object"==typeof exports?require("riot"):t.riot);for(var o in r)("object"==typeof exports?exports:t)[o]=r[o]}}(this,function(t){return function(t){function e(o){if(r[o])return r[o].exports;var n=r[o]={exports:{},id:o,loaded:!1};return t[o].call(n.exports,n,n.exports,e),n.loaded=!0,n.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e,r){"use strict";function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=r(1),s=r(2),u=console&&console.error||function(){},a=function(){function t(){n(this,t),i.router=this,i.observable(this),this.handler=new h,this.current=new y(new g("")),this.handleRequest=this.handleRequest.bind(this)}return t.prototype.route=function(t){this.handler=t},t.prototype.routes=function(t){this.route((new h).routes(t))},t.prototype.process=function(t){var e=new y(t);return this.handler.process(t,e),this.current=e,this.trigger("route:updated",e),e},t.prototype.handleRequest=function(){var t=Array.prototype.slice.call(arguments);this.process(new g(t.join("/")))},t.prototype.start=function(){i.route(this.handleRequest),i.route.start(),this.exec()},t.prototype.exec=function(){i.route.exec(this.handleRequest)},t}(),c=function(){function t(){n(this,t)}return t.prototype.matches=function(t){return!1},t.prototype.process=function(t,e){var r=this.matches(t);return r?this.processMatch(t,e,r):this.processNotMatch(t,e)},t.prototype.processMatch=function(t,e,r){return e.add(r),!0},t.prototype.processNotMatch=function(t,e){return!1},t.prototype.processRoutes=function(t,e,r){if(r&&r.length){for(var o=r.length,n=0;o>n;n++){var i=r[n];if(i.process(t,e))return!0}return!1}},t}(),h=function(t){function e(r){n(this,e),t.call(this,r),r=r||{},this.tag=r.tag,this.api=r.api,this.path=r.path,this.name=r.name,this.pathParameterNames=[];var o=(this.path||this.name||this.tag||"").replace(/^\//,"");this.pattern="^/?"+o.replace(/:([^\/]+)/,function(t,e){return this.pathParameterNames.push(e),"([^/]+)"}.bind(this))+"(:?/|$)",this.regex=new RegExp(this.pattern)}return o(e,t),e.prototype.routes=function(t){var e=t.filter(function(t){return t instanceof l}),r=t.filter(function(t){return t instanceof m}),o=t.filter(function(t){return t instanceof f}),n=t.filter(function(t){return-1===e.indexOf(t)&&-1===r.indexOf(t)&&-1===o.indexOf(t)});return o.length>1&&u("Can't use more than one NotFoundRoute per route. --> "+(this.name||this.path||this.tag)),r.length>1&&u("Can't use more than one DefaultRoute per route. --> "+(this.name||this.path||this.tag)),this._routes=[].concat(e).concat(n).concat(r).concat(o),this},e.prototype.matches=function(t){var e=this.regex.exec(t.uri);if(e){var r={};for(var o in this.pathParameterNames){var n=this.pathParameterNames[o];r[n]=e[parseInt(o,10)+1]}return{route:this,tag:this.tag,api:this.api,found:e[0],params:r}}return!1},e.prototype.processMatch=function(e,r,o){var n=t.prototype.processMatch.call(this,e,r,o);return this.processRoutes(e,r,o),n},e.prototype.processRoutes=function(e,r,o){return t.prototype.processRoutes.call(this,new p(e,o),r,this._routes)},e}(c),p=function v(t,e){n(this,v),this.request=t,this.matcher=e,this.uri=this.request.uri.substring(e.found.length),this.parentUri=this.request.uri.substring(0,e.found.length)},f=function(t){function e(r){n(this,e),t.call(this,r),r=r||{},this.tag=r.tag,this.api=r.api}return o(e,t),e.prototype.matches=function(t){return{route:this,tag:this.tag,api:this.api,found:t.uri}},e}(c),l=function(t){function e(r){n(this,e),t.call(this,r),r=r||{},this.from=r.from,this.to=r.to,this.pattern="(^/?)"+this.from+"(/|$)",this.regex=new RegExp(this.pattern)}return o(e,t),e.prototype.process=function(t,e){var r=t.uri.replace(this.regex,"$1"+this.to+"$2");if(r!==t.uri){var o=t.parentUri||"";e.uri=o+r,t.uri=r}},e}(c),m=function(t){function e(r){n(this,e),t.call(this,r),r=r||{},this.tag=r.tag,this.api=r.api}return o(e,t),e.prototype.matches=function(t){var e=t.uri.trim();return"/"===e||""===e?{route:this,tag:this.tag,api:this.api,found:e}:void 0},e}(c),g=function x(t){n(this,x),this.uri=t},y=function(){function t(e){n(this,t),this.uri=e.uri,this.matches=[],this.params={}}return t.prototype.add=function(t){this.matches.push(t);var e=t.params;if(e)for(var r in e)e.hasOwnProperty(r)&&(this.params[r]=e[r])},t.prototype.get=function(t){return this.matches[t]},t.prototype.size=function(){return this.matches.length},t.prototype.isEmpty=function(){return this.matches.length},t}();i.tag("route","<router-content></router-content>",function(t){this.calculateLevel=function(t){var e=0;return t.parent&&(e+=this.calculateLevel(t.parent)),t.opts.__router_level&&(e+=t.opts.__router_level),t.__router_tag&&(e+=1),e}.bind(this),this.unmountTag=function(){this.instance&&this.instance.forEach(function(t){t.unmount(!0)})},this.mountTag=function(t,e){this.unmountTag(),t&&(this.root.replaceChild(document.createElement(t),this.root.children[0]),this.instance=i.mount(this.root.children[0],t,e))},this.updateRoute=function(){var t={tag:null};if(i.router&&i.router.current){var e=i.router.current;if(this.level<=e.size()){var r=e.get(this.level);if(r){var o=r.params||{},n=s(!0,{},r.api,o,{__router_level:this.level});t={tag:r.tag,api:n}}}}this.mountTag(t.tag,t.api)}.bind(this),this.__router_tag="route",this.level=this.calculateLevel(this),i.router.on("route:updated",this.updateRoute),this.on("unmount",function(){i.router.off("route:updated",this.updateRoute),this.unmountTag()}.bind(this))});var d=new a;d.Route=h,d.DefaultRoute=m,d.RedirectRoute=l,d.NotFoundRoute=f,d._={Response:y,Request:g},i.router=d,t.exports=d},function(e,r,o){e.exports=t},function(t,e,r){var o,n=Object.prototype.hasOwnProperty,i=Object.prototype.toString,s=function(t){return"function"==typeof Array.isArray?Array.isArray(t):"[object Array]"===i.call(t)},u=function(t){"use strict";if(!t||"[object Object]"!==i.call(t))return!1;var e=n.call(t,"constructor"),r=t.constructor&&t.constructor.prototype&&n.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!e&&!r)return!1;var s;for(s in t);return s===o||n.call(t,s)};t.exports=function a(){"use strict";var t,e,r,n,i,c,h=arguments[0],p=1,f=arguments.length,l=!1;for("boolean"==typeof h?(l=h,h=arguments[1]||{},p=2):("object"!=typeof h&&"function"!=typeof h||null==h)&&(h={});f>p;++p)if(t=arguments[p],null!=t)for(e in t)r=h[e],n=t[e],h!==n&&(l&&n&&(u(n)||(i=s(n)))?(i?(i=!1,c=r&&s(r)?r:[]):c=r&&u(r)?r:{},h[e]=a(l,c,n)):n!==o&&(h[e]=n));return h}}])});
//# sourceMappingURL=router.min.js.map